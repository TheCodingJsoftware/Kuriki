@font-face {
    font-family: "Latin Modern Roman";
    src: url("../fonts/lmroman10-regular.woff") format("woff");
    font-weight: 400;
    font-style: normal;
}

@font-face {
    font-family: "Latin Modern Roman";
    src: url("../fonts/lmroman10-bold.woff") format("woff");
    font-weight: 700;
    font-style: normal;
}

@font-face {
    font-family: "Latin Modern Roman";
    src: url("../fonts/lmroman10-italic.woff") format("woff");
    font-weight: 400;
    font-style: italic;
}

@font-face {
    font-family: "Latin Modern Roman";
    src: url("../fonts/lmroman10-bolditalic.woff") format("woff");
    font-weight: 700;
    font-style: italic;
}

@font-face {
    font-family: "OpenDyslexic";
    src: url("../fonts/OpenDyslexic-Regular.otf") format("opentype");
    font-weight: 400;
    font-style: normal;
}

@font-face {
    font-family: "OpenDyslexic";
    src: url("../fonts/OpenDyslexic-Bold.otf") format("opentype");
    font-weight: 700;
    font-style: normal;
}

:root {
    --ws-font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    --ws-font-size: 12pt;
}

/* Apply to the preview output area (adjust selector to match your preview root) */

#preview-pane {
    font-family: var(--ws-font-family);
    font-size: var(--ws-font-size);
}

.highlight {
    background-color: var(--primary);
    color: var(--on-primary);
    font-weight: bold;
}

.hidden {
    display: none !important;
}

.pointer {
    cursor: pointer;
}

.handle {
    cursor: move;
}

.block-collapsed .block-content {
    display: none;
}

.slot {
    min-height: 60px;
    border-radius: 32px;
    padding: 3px;
    position: relative;
}

.slot::after {
    /* content: attr(data-swapy-slot); */
    /* position: absolute;
    top: 0;
    right: 0;
    font-size: 12pt; */
    color: var(--on-primary-container);
}

.slot[data-swapy-highlighted] {
    background: var(--surface-variant);
    border: 1px solid var(--primary) !important;
    transition: background-color var(--speed3) ease-in-out, border-color var(--speed1) ease;
}


/* .item[data-swapy-dragging] {
    opacity: 0.6;
} */

[data-swapy-item] article:not(.hidden) {
    margin: 3px;
}

[data-swapy-item] article.hidden {
    margin: 0;
    /* or omit if default */
}

.swapy-container {
    display: flex;
    flex-direction: column;
    gap: 6px;
    /* this replaces grid gaps safely */
}

@media screen {
    .page-break {
        height: 24px;
        border-top: 2px dashed var(--outline-variant);
        margin: 24px 0;
    }

    .page-break::after {
        font-family: sui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        content: "page break";
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%);

        --_blur: 1rem;
        -webkit-backdrop-filter: blur(var(--_blur));
        backdrop-filter: blur(var(--_blur));
        color: var(--on-surface);

        border: 0.0175rem solid var(--outline-variant);
        border-radius: 0.5rem;
        padding: 0 12px;

        text-transform: uppercase;

        width: max-content;
        white-space: nowrap;
    }

    .question-space {
        position: relative;
        /* required for pseudo-elements */
        border: 1px dashed var(--outline-variant);
        border-radius: 0.5rem;
    }

    /* Center label (you already have this) */
    .question-space::after {
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        content: "space";
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%);

        --_blur: 1rem;
        -webkit-backdrop-filter: blur(var(--_blur));
        backdrop-filter: blur(var(--_blur));
        color: var(--on-surface);

        border: 0.0175rem solid var(--outline-variant);
        border-radius: 0.5rem;
        padding: 0 12px;

        text-transform: uppercase;
        width: max-content;
        white-space: nowrap;
    }

    /* Height indicator */
    .question-space::before {
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        content: attr(data-height);
        position: absolute;
        top: 25%;
        right: 0.75rem;
        transform: translateY(-50%);

        --_blur: 1rem;
        -webkit-backdrop-filter: blur(var(--_blur));
        backdrop-filter: blur(var(--_blur));
        color: var(--on-surface);

        padding: 2px 6px;
        border: 0.0175rem solid var(--outline-variant);
        border-radius: 0.375rem;

        font-size: 0.7rem;
        white-space: nowrap;
    }

    /* Vertical dashed guide line */
    .question-space .height-line {
        position: absolute;
        top: 0.5rem;
        bottom: 0.5rem;
        right: 0.25rem;
        border-right: 1px solid var(--outline-variant);
        pointer-events: none;
    }

    .blank-space {
        position: relative;
        /* required for pseudo-elements */
        border: 1px dashed var(--outline-variant);
        border-radius: 0.5rem;
    }

    .blank-space::after {
        font-family: sui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        content: "blank space";
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%);

        --_blur: 1rem;
        -webkit-backdrop-filter: blur(var(--_blur));
        backdrop-filter: blur(var(--_blur));
        color: var(--on-surface);

        border: 0.0175rem solid var(--outline-variant);
        border-radius: 0.5rem;
        padding: 0 12px;

        text-transform: uppercase;

        width: max-content;
        white-space: nowrap;
    }


    /* Height indicator */
    .blank-space::before {
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        content: attr(data-height);
        position: absolute;
        top: 50%;
        right: 0.75rem;
        transform: translateY(-50%);

        padding: 2px 6px;

        --_blur: 1rem;
        -webkit-backdrop-filter: blur(var(--_blur));
        backdrop-filter: blur(var(--_blur));
        color: var(--on-surface);

        border: 0.0175rem solid var(--outline-variant);
        border-radius: 0.375rem;

        font-size: 0.7rem;
        white-space: nowrap;
    }

    /* Vertical dashed guide line */
    .blank-space .height-line {
        position: absolute;
        top: 0.5rem;
        bottom: 0.5rem;
        right: 0.25rem;
        border-right: 1px solid var(--outline-variant);
        pointer-events: none;
    }
}

html,
body {
    height: 100%;
    margin: 0;
    padding: 0;
}

@media (min-width: 601px) {
    main {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    /* make editor + preview one row with 2 columns */
    #editor-preview-container {
        flex: 1;
        display: flex;
        flex-direction: row;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    #editor-container,
    #preview-container {
        flex: 1 1 50%;
        /* equal width columns */
        height: 100%;
        overflow-y: auto;
        /* independent scroll */
        overflow-x: hidden;
        box-sizing: border-box;
    }

    #editor-container {
        margin: 1rem;
    }

    #preview-container {
        padding: 1rem;
    }

    /* Optional: keep internal content full-height */
    #editor-pane,
    #preview-pane {
        min-height: 100%;
    }
}


/* === MOBILE: stack vertically === */

@media (max-width: 600px) {
    body {
        overflow: auto;
        height: auto;
    }

    #editor-preview-container {
        display: block;
        /* stack */
        height: auto;
    }

    #editor-container,
    #preview-container {
        height: auto;
        overflow: visible;
        padding: 0.5rem;
    }
}


article .handle {
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--speed2) ease;
}

/* Show handle when hovering the block */
article:hover .handle {
    opacity: 1;
    pointer-events: auto;
}

/* Preview highlight */
#preview-pane .worksheet-block.is-active {
    background-color: color-mix(in srgb, var(--surface-variant) 40%, transparent);
    color: var(--on-surface);
    border-radius: 0.625rem;
    outline: .125rem solid var(--primary);
    outline-offset: 0.55rem;
    box-shadow: 0 0 0 0.225rem color-mix(in srgb, var(--surface-variant) 40%, transparent);

    transition:
        outline-offset var(--speed2) ease,
        color var(--speed2) ease,
        box-shadow var(--speed2) ease,
        background-color var(--speed2) ease;
}

@media print {
    body {
        background-color: white !important;
        color: black !important;
        overflow: visible !important;
        height: auto !important;
    }


    /* Make the printable area a normal document flow */
    html,
    body,
    main,
    #editor-preview-container,
    #preview-container,
    #preview-pane {
        display: block !important;
        height: auto !important;
        overflow: visible !important;
    }

    /* If BeerCSS adds flex/grid on common containers, neutralize it */
    .grid,
    .flex,
    .columns,
    .column,
    .container,
    .swapy-container,
    .slot,
    [data-swapy-slot],
    [data-swapy-item] {
        display: block !important;
        overflow: visible !important;
    }

    /* Avoid positioned stuff interfering with page layout */
    .slot,
    .page-break {
        position: static !important;
    }

    .page-break {
        page-break-after: always !important;
        break-after: always !important;
    }

    .worksheet-block {
        break-inside: avoid !important;
        page-break-inside: avoid !important;
    }

    #editor-preview-container {
        display: block !important;
        /* stack vertically */
        width: 100% !important;
        height: auto !important;
    }

    #editor-container {
        display: none !important;
        /* hide editor on print */
    }

    #preview-container {
        display: block !important;
        width: 100% !important;
        height: auto !important;
        overflow: visible !important;
    }

    #preview-pane {
        width: 100% !important;
        font-family: var(--ws-font-family);
        font-size: var(--ws-font-size);
    }

    /* Never show editor highlight states in print */
    #preview-pane .worksheet-block.is-active,
    #preview-pane .worksheet-block:hover,
    #preview-pane .worksheet-block:focus,
    #preview-pane .worksheet-block:focus-within {
        outline: none !important;
        outline-offset: 0 !important;
        box-shadow: none !important;

        /* remove any tinting */
        background: transparent !important;
        background-color: transparent !important;

        /* if you ever used borders for highlight */
        border-color: transparent !important;
    }

    .question-space::before,
    .question-space::after,
    .question-space .height-line {
        display: none !important;
    }

    #preview-pane,
    #preview-pane p,
    #preview-pane tbody td,
    #preview-pane h1,
    #preview-pane h2,
    #preview-pane h3,
    #preview-pane h4,
    #preview-pane h5,
    #preview-pane h6 {
        background-color: white !important;
        color: black !important;
        border-color: black !important;
    }

    .hide-on-print {
        display: none !important;
    }

    @page {
        margin: 20mm;

        @top-right {
            content: counter(page);
            font-size: 14px;
            color: black;
        }
    }
}